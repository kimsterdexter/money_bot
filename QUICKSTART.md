# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - Money Bot

## –ó–∞ 2 –º–∏–Ω—É—Ç—ã –¥–æ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ (—Å Docker)

### 1Ô∏è‚É£ –ü–æ–ª—É—á–∏ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π Telegram
2. –ù–∞–π–¥–∏ [@BotFather](https://t.me/botfather)
3. –û—Ç–ø—Ä–∞–≤—å –∫–æ–º–∞–Ω–¥—É `/newbot`
4. –ü—Ä–∏–¥—É–º–∞–π –∏–º—è –∏ username –¥–ª—è –±–æ—Ç–∞
5. –°–∫–æ–ø–∏—Ä—É–π —Ç–æ–∫–µ–Ω (–≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ `1234567890:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw`)

### 2Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏–µ

```bash
# –°–æ–∑–¥–∞–π —Ñ–∞–π–ª .env
cp env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π .env –∏ –≤—Å—Ç–∞–≤—å —Å–≤–æ–π —Ç–æ–∫–µ–Ω:
# BOT_TOKEN=—Ç–≤–æ–π_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å
```

### 3Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏ –≤—Å—ë –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π

```bash
docker-compose up -d --build
```

**–ì–æ—Ç–æ–≤–æ!** –ë–æ—Ç –∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞—é—Ç. –ù–∞–π–¥–∏ –±–æ—Ç–∞ –≤ Telegram –∏ –æ—Ç–ø—Ä–∞–≤—å `/start`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–æ–±–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å UP)
docker-compose ps

# –õ–æ–≥–∏ –±–æ—Ç–∞
docker-compose logs -f bot
```

---

## üêç –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ Docker)

–ï—Å–ª–∏ –Ω–µ —Ö–æ—á–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker:

### 1Ô∏è‚É£ –ü–æ–ª—É—á–∏ —Ç–æ–∫–µ–Ω (—Å–º. –≤—ã—à–µ)

### 2Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π .env (—Å–º. –≤—ã—à–µ)

### 3Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
python3 -m venv venv
source venv/bin/activate
pip install -r backend/requirements.txt
```

### 4Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏ —Ç–æ–ª—å–∫–æ PostgreSQL

```bash
docker run -d \
  --name money_bot_db \
  -e POSTGRES_DB=money_bot \
  -e POSTGRES_USER=postgres \
  -e POSTGRES_PASSWORD=postgres \
  -p 5432:5432 \
  postgres:16-alpine
```

### 5Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞

```bash
python -m backend.bot.main
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã:

```bash
# –ó–∞–ø—É—Å—Ç–∏ smoke-—Ç–µ—Å—Ç—ã
./run_tests.sh
```

### –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:

1. –ù–∞–π–¥–∏ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å `/start` - –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
3. –û—Ç–ø—Ä–∞–≤—å `/income` –∏ –≤–≤–µ–¥–∏ `1000`
4. –û—Ç–ø—Ä–∞–≤—å `/expense` –∏ –≤–≤–µ–¥–∏ `300`
5. –û—Ç–ø—Ä–∞–≤—å `/balance` - –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å 700 ‚ÇΩ
6. –û—Ç–ø—Ä–∞–≤—å `/history` - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å 2 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

---

## üìã –ß–∞—Å—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –° Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ (–±–æ—Ç + –ë–î)
docker-compose up -d

# –ó–∞–ø—É—Å–∫ —Å –ø–µ—Ä–µ—Å–±–æ—Ä–∫–æ–π (–ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞)
docker-compose up -d --build

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ–≥–æ
docker-compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –±–æ—Ç–∞
docker-compose restart bot

# –õ–æ–≥–∏ –±–æ—Ç–∞ (live)
docker-compose logs -f bot

# –õ–æ–≥–∏ –ë–î
docker-compose logs -f postgres

# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
docker exec -it money_bot_db psql -U postgres -d money_bot

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (—Å —É–¥–∞–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö!)
docker-compose down -v
```

### –ë–µ–∑ Docker:

```bash
# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
python -m backend.bot.main

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
# Ctrl+C –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

# –õ–æ–≥–∏ –±–æ—Ç–∞
tail -f bot.log

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
./run_tests.sh
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

–†–µ–¥–∞–∫—Ç–∏—Ä—É–π —Ñ–∞–π–ª `.env`:

```env
# –£—Ç—Ä–µ–Ω–Ω–µ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è—Ö
DAILY_INCOME_TIME=09:00

# –í–µ—á–µ—Ä–Ω–µ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ —Ä–∞—Å—Ö–æ–¥–∞—Ö
DAILY_EXPENSE_TIME=20:00

# –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å
TIMEZONE=Europe/Moscow
```

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞.

---

## üêõ –ü—Ä–æ–±–ª–µ–º—ã?

### –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –±–æ—Ç–∞
docker-compose logs bot

# –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ PostgreSQL
docker-compose logs postgres
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –≤—Å—ë
docker-compose restart

# –ò–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down
docker-compose up -d
```

### –ò–∑–º–µ–Ω–∏–ª –∫–æ–¥ - –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

```bash
# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏ –æ–±—Ä–∞–∑ –±–æ—Ç–∞
docker-compose up -d --build bot
```

### –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω

```bash
# –ü—Ä–æ–≤–µ—Ä—å .env —Ñ–∞–π–ª
cat .env | grep BOT_TOKEN

# –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤, –∫–∞–≤—ã—á–µ–∫)

# –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è .env –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞
docker-compose restart bot
```

### –ù—É–∂–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë

```bash
# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –¥–∞–Ω–Ω—ã–µ
docker-compose down -v

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Å –Ω—É–ª—è
docker-compose up -d --build
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
money_bot/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –±–æ—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers.py        # –ö–æ–º–∞–Ω–¥—ã –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ scheduler.py       # –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py        # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models.py          # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ test_smoke.py          # Smoke-—Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ docker-compose.yml         # PostgreSQL
‚îú‚îÄ‚îÄ .env                       # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–æ–∑–¥–∞–π —Å–∞–º)
‚îú‚îÄ‚îÄ env.example                # –ü—Ä–∏–º–µ—Ä .env
‚îî‚îÄ‚îÄ README.md                  # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üéØ –ß—Ç–æ –¥–∞–ª—å—à–µ?

1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π –≤—Ä–µ–º—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –ø–æ–¥ —Å–µ–±—è
3. ‚≠ê –ù–∞—á–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
4. üìà –°–ª–µ–¥–∏ –∑–∞ —Å–≤–æ–∏–º–∏ —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏!

---

**–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?** –°–º–æ—Ç—Ä–∏ –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `README.md`

